 DEBUG: initializeEventListeners() - Found 4 flexibility pills
 DEBUG: Pill 0: data-flexibility="exact", text="
                                Exact
                            "
 DEBUG: Pill 1: data-flexibility="1", text="
                                ±1 day
                            "
 DEBUG: Pill 2: data-flexibility="2", text="
                                ±2 days
                            "
 DEBUG: Pill 3: data-flexibility="3", text="
                                ±3 days
                            "
 Calendar generated with 15 selectable dates
 Loading saved user state: Object
 DEBUG: Loaded flexibility value: 2
 DEBUG: Set pendingFlexibilityRestore to: 2
 User state restored successfully
 Calendar display updated - CheckIn: 3 CheckOut: 5
 Loading offers cache...
 DEBUG: About to restore flexibility, pendingFlexibilityRestore = 2
 Final flexibility restoration to: 2
 Setting flexibility to: 2 Pills found: 4
 Selected pill with flexibility: 2
 Current selected pill: 2
 Applying calendar filter with restored state...
 Calendar filter applied: 2025-08-22 to 2025-08-24
 Building query with flexibility: 2
 Fetching available offers from: /api/activities?adults=2&children=0&checkinDate=2025-08-22&checkoutDate=2025-08-24&flexibility=2
 Final flexibility verification: 2
 Response status: 200 OK
 Received 10 available offers: Object
 Displaying available offers: Array(10)
 Displaying available offers: Array(10)
 Stored currentOffers with offer_ids: Array(10)
 === STARTING generateChampionCards ===
 Generating villa cards for 10 offers
 Grouped into 3 villas
 Villa groups: Array(3)
 Generating card for villa: The Shore Villa with 4 booking options
 Primary offer: 2025-08-21T00:00:00.000Z nights: 2
 All options: Array(4)
 === Generating card for The Shore Villa ===
 Primary offer data: Object
 parseImageUrls called with: [
  "https://villatokay.com/wp-content/uploads/2025/08/the-Shore-3.jpg",
  "https://villatokay.com/w...
 parseImageUrls: Attempting JSON parse
 parseImageUrls: Successfully parsed 11 URLs from JSON
 Parsed 11 image URLs for The Shore Villa: Array(11)
 Booking options generation for villa: The Shore Villa
 Primary offer: Object
 All villa offers: Array(4)
 Found 4 unique booking options for villa The Shore Villa
 Generating card for villa: The Pearl Villa with 3 booking options
 Primary offer: 2025-08-22T00:00:00.000Z nights: 2
 All options: Array(3)
 === Generating card for The Pearl Villa ===
 Primary offer data: Object
 parseImageUrls called with: [
  "https://villatokay.com/wp-content/uploads/2022/09/Villa-Tokay-The-Pearl-Outdoors-Terrace.jpg",
...
 parseImageUrls: Attempting JSON parse
 parseImageUrls: Successfully parsed 12 URLs from JSON
 Parsed 12 image URLs for The Pearl Villa: Array(12)
 Booking options generation for villa: The Pearl Villa
 Primary offer: Object
 All villa offers: Array(3)
 Found 3 unique booking options for villa The Pearl Villa
 Generating card for villa: The Sunset Room with 3 booking options
 Primary offer: 2025-08-22T00:00:00.000Z nights: 2
 All options: Array(3)
 === Generating card for The Sunset Room ===
 Primary offer data: Object
 parseImageUrls called with: [
  "https://villatokay.com/wp-content/uploads/2025/07/Villa-Tokay-Sunset-Garden.jpg",
  "https://vi...
 parseImageUrls: Attempting JSON parse
 parseImageUrls: Successfully parsed 10 URLs from JSON
 Parsed 10 image URLs for The Sunset Room: Array(10)
 Booking options generation for villa: The Sunset Room
 Primary offer: Object
 All villa offers: Array(3)
 Found 3 unique booking options for villa The Sunset Room
 Generated HTML for The Shore Villa, length: 12096 chars
 Generated HTML for The Pearl Villa, length: 11880 chars
 Generated HTML for The Sunset Room, length: 10744 chars
 Total villa cards HTML generated: 3
 HTML lengths: Array(3)
 championOffers element exists? true
 Total HTML to insert: 34720 chars
 First 200 chars of HTML: 
            <div class="champion-offer-card" data-offer-id="259" data-current-offer='{"checkIn":"2025-08-21T00:00:00.000Z","checkOut":"2025-08-23","nights":2}' data-images='["https://villatokay.com/w
 HTML inserted into championOffers
 Villa cards found after insertion: 3
 Setting offersContainer to display: block
 Starting carousels for 3 cards
 === COMPLETED generateChampionCards ===
 Loaded 4939 offers into cache
 Unique villa names in cache: Array(8)
 DEBUG: Starting delayed villa state restoration...
 DEBUG: Starting villa state restoration
 - State to restore: Object
 - Expanded villas: Array(2)
script.js?v=__ASSET_VERSION__:340 - Selected offers: Object
script.js?v=__ASSET_VERSION__:344 - Available villa cards: 3
script.js?v=__ASSET_VERSION__:348 - Card 0: villa="The Shore Villa"
script.js?v=__ASSET_VERSION__:348 - Card 1: villa="The Pearl Villa"
script.js?v=__ASSET_VERSION__:348 - Card 2: villa="The Sunset Room"
script.js?v=__ASSET_VERSION__:353 DEBUG: Restoring villa expansions...
script.js?v=__ASSET_VERSION__:355 - Looking for villa: "The Pearl Villa"
script.js?v=__ASSET_VERSION__:366 - Found card for villa "The Pearl Villa": true
script.js?v=__ASSET_VERSION__:370 - Found show details button: true
script.js?v=__ASSET_VERSION__:371 - Button expanded state: false
script.js?v=__ASSET_VERSION__:374 - Expanding villa "The Pearl Villa"...
script.js?v=__ASSET_VERSION__:376 ✅ Restored expansion for villa: The Pearl Villa
script.js?v=__ASSET_VERSION__:355 - Looking for villa: "The Shore Villa"
script.js?v=__ASSET_VERSION__:366 - Found card for villa "The Shore Villa": true
script.js?v=__ASSET_VERSION__:370 - Found show details button: true
script.js?v=__ASSET_VERSION__:371 - Button expanded state: false
script.js?v=__ASSET_VERSION__:374 - Expanding villa "The Shore Villa"...
script.js?v=__ASSET_VERSION__:376 ✅ Restored expansion for villa: The Shore Villa
script.js?v=__ASSET_VERSION__:390 DEBUG: Restoring offer selections...
script.js?v=__ASSET_VERSION__:392 - Looking for villa "The Shore Villa" with selected button index: 0
script.js?v=__ASSET_VERSION__:407 - Looking for button index: 0
script.js?v=__ASSET_VERSION__:408 - Available buttons in villa "The Shore Villa": 4
script.js?v=__ASSET_VERSION__:412 - Found target button at index 0
script.js?v=__ASSET_VERSION__:413 - Button selected state: true
script.js?v=__ASSET_VERSION__:420 ⚠️ Offer already selected or button not found
script.js?v=__ASSET_VERSION__:392 - Looking for villa "The Sunset Room" with selected button index: 0
script.js?v=__ASSET_VERSION__:407 - Looking for button index: 0
script.js?v=__ASSET_VERSION__:408 - Available buttons in villa "The Sunset Room": 3
script.js?v=__ASSET_VERSION__:412 - Found target button at index 0
script.js?v=__ASSET_VERSION__:413 - Button selected state: true
script.js?v=__ASSET_VERSION__:420 ⚠️ Offer already selected or button not found
script.js?v=__ASSET_VERSION__:702 Date clicked, index: 2 Total dates: 15
script.js?v=__ASSET_VERSION__:704 Date info: Object
script.js?v=__ASSET_VERSION__:711 Before click - CheckIn: 3 CheckOut: 5
script.js?v=__ASSET_VERSION__:733 Reset selection, new check-in: 2
script.js?v=__ASSET_VERSION__:137 DEBUG: Saving flexibility value: 2
script.js?v=__ASSET_VERSION__:257 DEBUG: Capturing expanded villa states
script.js?v=__ASSET_VERSION__:258 - Found expanded buttons: 2
script.js?v=__ASSET_VERSION__:261 - Expanded button 0: <button class=​"show-details-btn expanded" onclick=​"app.toggleVillaDetails(this)​">​…​</button>​
script.js?v=__ASSET_VERSION__:268 - Villa name: The Shore Villa
script.js?v=__ASSET_VERSION__:261 - Expanded button 1: <button class=​"show-details-btn expanded" onclick=​"app.toggleVillaDetails(this)​">​…​</button>​
script.js?v=__ASSET_VERSION__:268 - Villa name: The Pearl Villa
script.js?v=__ASSET_VERSION__:282 DEBUG: Captured expanded villas: Array(2)
script.js?v=__ASSET_VERSION__:293 DEBUG: Capturing selected offer states
script.js?v=__ASSET_VERSION__:294 - Found active buttons: 3
script.js?v=__ASSET_VERSION__:297 - Active button 0: <button class=​"booking-option-btn selected" onclick=​"app.selectBookingOption('259', 'The Shore Villa', 0)​" data-offer-id=​"259">​…​</button>​
script.js?v=__ASSET_VERSION__:321 - Villa: The Shore Villa, Selected button index: 0
script.js?v=__ASSET_VERSION__:322 - Button classes: booking-option-btn selected
script.js?v=__ASSET_VERSION__:323 - Total buttons in villa: 4
script.js?v=__ASSET_VERSION__:297 - Active button 1: <button class=​"booking-option-btn selected" onclick=​"app.selectBookingOption('18', 'The Pearl Villa', 0)​" data-offer-id=​"18">​…​</button>​
script.js?v=__ASSET_VERSION__:321 - Villa: The Pearl Villa, Selected button index: 0
script.js?v=__ASSET_VERSION__:322 - Button classes: booking-option-btn selected
script.js?v=__ASSET_VERSION__:323 - Total buttons in villa: 3
script.js?v=__ASSET_VERSION__:297 - Active button 2: <button class=​"booking-option-btn selected" onclick=​"app.selectBookingOption('3543', 'The Sunset Room', 0)​" data-offer-id=​"3543">​…​</button>​
script.js?v=__ASSET_VERSION__:321 - Villa: The Sunset Room, Selected button index: 0
script.js?v=__ASSET_VERSION__:322 - Button classes: booking-option-btn selected
script.js?v=__ASSET_VERSION__:323 - Total buttons in villa: 3
script.js?v=__ASSET_VERSION__:328 DEBUG: Captured selected offers: Object
script.js?v=__ASSET_VERSION__:159 User state saved with flexibility: 2 expanded villas: Array(2) selected offers: Object
script.js?v=__ASSET_VERSION__:792 Calendar display updated - CheckIn: 2 CheckOut: null
script.js?v=__ASSET_VERSION__:702 Date clicked, index: 4 Total dates: 15
script.js?v=__ASSET_VERSION__:704 Date info: Object
script.js?v=__ASSET_VERSION__:711 Before click - CheckIn: 2 CheckOut: null
script.js?v=__ASSET_VERSION__:727 Set check-out to: 4
script.js?v=__ASSET_VERSION__:137 DEBUG: Saving flexibility value: 2
script.js?v=__ASSET_VERSION__:257 DEBUG: Capturing expanded villa states
script.js?v=__ASSET_VERSION__:258 - Found expanded buttons: 2
script.js?v=__ASSET_VERSION__:261 - Expanded button 0: <button class=​"show-details-btn expanded" onclick=​"app.toggleVillaDetails(this)​">​…​</button>​
script.js?v=__ASSET_VERSION__:268 - Villa name: The Shore Villa
script.js?v=__ASSET_VERSION__:261 - Expanded button 1: <button class=​"show-details-btn expanded" onclick=​"app.toggleVillaDetails(this)​">​…​</button>​
script.js?v=__ASSET_VERSION__:268 - Villa name: The Pearl Villa
script.js?v=__ASSET_VERSION__:282 DEBUG: Captured expanded villas: Array(2)
script.js?v=__ASSET_VERSION__:293 DEBUG: Capturing selected offer states
script.js?v=__ASSET_VERSION__:294 - Found active buttons: 3
script.js?v=__ASSET_VERSION__:297 - Active button 0: <button class=​"booking-option-btn selected" onclick=​"app.selectBookingOption('259', 'The Shore Villa', 0)​" data-offer-id=​"259">​…​</button>​
script.js?v=__ASSET_VERSION__:321 - Villa: The Shore Villa, Selected button index: 0
script.js?v=__ASSET_VERSION__:322 - Button classes: booking-option-btn selected
script.js?v=__ASSET_VERSION__:323 - Total buttons in villa: 4
script.js?v=__ASSET_VERSION__:297 - Active button 1: <button class=​"booking-option-btn selected" onclick=​"app.selectBookingOption('18', 'The Pearl Villa', 0)​" data-offer-id=​"18">​…​</button>​
script.js?v=__ASSET_VERSION__:321 - Villa: The Pearl Villa, Selected button index: 0
script.js?v=__ASSET_VERSION__:322 - Button classes: booking-option-btn selected
script.js?v=__ASSET_VERSION__:323 - Total buttons in villa: 3
script.js?v=__ASSET_VERSION__:297 - Active button 2: <button class=​"booking-option-btn selected" onclick=​"app.selectBookingOption('3543', 'The Sunset Room', 0)​" data-offer-id=​"3543">​…​</button>​
script.js?v=__ASSET_VERSION__:321 - Villa: The Sunset Room, Selected button index: 0
script.js?v=__ASSET_VERSION__:322 - Button classes: booking-option-btn selected
script.js?v=__ASSET_VERSION__:323 - Total buttons in villa: 3
script.js?v=__ASSET_VERSION__:328 DEBUG: Captured selected offers: Object
script.js?v=__ASSET_VERSION__:159 User state saved with flexibility: 2 expanded villas: Array(2) selected offers: Object
script.js?v=__ASSET_VERSION__:792 Calendar display updated - CheckIn: 2 CheckOut: 4
script.js?v=__ASSET_VERSION__:867 Calendar filter applied: 2025-08-21 to 2025-08-23
script.js?v=__ASSET_VERSION__:1524 Building query with flexibility: 2
script.js?v=__ASSET_VERSION__:1457 Fetching available offers from: /api/activities?adults=2&children=0&checkinDate=2025-08-21&checkoutDate=2025-08-23&flexibility=2
script.js?v=__ASSET_VERSION__:1459 Response status: 200 OK
script.js?v=__ASSET_VERSION__:1473 Received 7 available offers: Object
script.js?v=__ASSET_VERSION__:1474 Displaying available offers: Array(7)
script.js?v=__ASSET_VERSION__:1754 Displaying available offers: Array(7)
script.js?v=__ASSET_VERSION__:1761 Stored currentOffers with offer_ids: Array(7)
script.js?v=__ASSET_VERSION__:1840 === STARTING generateChampionCards ===
script.js?v=__ASSET_VERSION__:1841 Generating villa cards for 7 offers
script.js?v=__ASSET_VERSION__:1845 Grouped into 3 villas
script.js?v=__ASSET_VERSION__:1846 Villa groups: Array(3)
script.js?v=__ASSET_VERSION__:1861 Generating card for villa: The Shore Villa with 3 booking options
script.js?v=__ASSET_VERSION__:1862 Primary offer: 2025-08-21T00:00:00.000Z nights: 2
script.js?v=__ASSET_VERSION__:1863 All options: Array(3)
script.js?v=__ASSET_VERSION__:2067 === Generating card for The Shore Villa ===
script.js?v=__ASSET_VERSION__:2068 Primary offer data: Object
script.js?v=__ASSET_VERSION__:3390 parseImageUrls called with: [
  "https://villatokay.com/wp-content/uploads/2025/08/the-Shore-3.jpg",
  "https://villatokay.com/w...
script.js?v=__ASSET_VERSION__:3400 parseImageUrls: Attempting JSON parse
script.js?v=__ASSET_VERSION__:3402 parseImageUrls: Successfully parsed 11 URLs from JSON
script.js?v=__ASSET_VERSION__:2078 Parsed 11 image URLs for The Shore Villa: Array(11)
script.js?v=__ASSET_VERSION__:1946 Booking options generation for villa: The Shore Villa
script.js?v=__ASSET_VERSION__:1947 Primary offer: Object
script.js?v=__ASSET_VERSION__:1948 All villa offers: Array(3)
script.js?v=__ASSET_VERSION__:1981 Found 3 unique booking options for villa The Shore Villa
script.js?v=__ASSET_VERSION__:1861 Generating card for villa: The Pearl Villa with 2 booking options
script.js?v=__ASSET_VERSION__:1862 Primary offer: 2025-08-22T00:00:00.000Z nights: 2
script.js?v=__ASSET_VERSION__:1863 All options: Array(2)
script.js?v=__ASSET_VERSION__:2067 === Generating card for The Pearl Villa ===
script.js?v=__ASSET_VERSION__:2068 Primary offer data: Object
script.js?v=__ASSET_VERSION__:3390 parseImageUrls called with: [
  "https://villatokay.com/wp-content/uploads/2022/09/Villa-Tokay-The-Pearl-Outdoors-Terrace.jpg",
...
script.js?v=__ASSET_VERSION__:3400 parseImageUrls: Attempting JSON parse
script.js?v=__ASSET_VERSION__:3402 parseImageUrls: Successfully parsed 12 URLs from JSON
script.js?v=__ASSET_VERSION__:2078 Parsed 12 image URLs for The Pearl Villa: Array(12)
script.js?v=__ASSET_VERSION__:1946 Booking options generation for villa: The Pearl Villa
script.js?v=__ASSET_VERSION__:1947 Primary offer: Object
script.js?v=__ASSET_VERSION__:1948 All villa offers: Array(2)
script.js?v=__ASSET_VERSION__:1981 Found 2 unique booking options for villa The Pearl Villa
script.js?v=__ASSET_VERSION__:1861 Generating card for villa: The Sunset Room with 2 booking options
script.js?v=__ASSET_VERSION__:1862 Primary offer: 2025-08-22T00:00:00.000Z nights: 2
script.js?v=__ASSET_VERSION__:1863 All options: Array(2)
script.js?v=__ASSET_VERSION__:2067 === Generating card for The Sunset Room ===
script.js?v=__ASSET_VERSION__:2068 Primary offer data: Object
script.js?v=__ASSET_VERSION__:3390 parseImageUrls called with: [
  "https://villatokay.com/wp-content/uploads/2025/07/Villa-Tokay-Sunset-Garden.jpg",
  "https://vi...
script.js?v=__ASSET_VERSION__:3400 parseImageUrls: Attempting JSON parse
script.js?v=__ASSET_VERSION__:3402 parseImageUrls: Successfully parsed 10 URLs from JSON
script.js?v=__ASSET_VERSION__:2078 Parsed 10 image URLs for The Sunset Room: Array(10)
script.js?v=__ASSET_VERSION__:1946 Booking options generation for villa: The Sunset Room
script.js?v=__ASSET_VERSION__:1947 Primary offer: Object
script.js?v=__ASSET_VERSION__:1948 All villa offers: Array(2)
script.js?v=__ASSET_VERSION__:1981 Found 2 unique booking options for villa The Sunset Room
script.js?v=__ASSET_VERSION__:1867 Generated HTML for The Shore Villa, length: 11280 chars
script.js?v=__ASSET_VERSION__:1867 Generated HTML for The Pearl Villa, length: 11064 chars
script.js?v=__ASSET_VERSION__:1867 Generated HTML for The Sunset Room, length: 9926 chars
script.js?v=__ASSET_VERSION__:1875 Total villa cards HTML generated: 3
script.js?v=__ASSET_VERSION__:1876 HTML lengths: Array(3)
script.js?v=__ASSET_VERSION__:1880 championOffers element exists? true
script.js?v=__ASSET_VERSION__:1889 Total HTML to insert: 32270 chars
script.js?v=__ASSET_VERSION__:1890 First 200 chars of HTML: 
            <div class="champion-offer-card" data-offer-id="259" data-current-offer='{"checkIn":"2025-08-21T00:00:00.000Z","checkOut":"2025-08-23","nights":2}' data-images='["https://villatokay.com/w
script.js?v=__ASSET_VERSION__:1893 HTML inserted into championOffers
script.js?v=__ASSET_VERSION__:1897 Villa cards found after insertion: 3
script.js?v=__ASSET_VERSION__:1901 Setting offersContainer to display: block
script.js?v=__ASSET_VERSION__:1909 Starting carousels for 3 cards
script.js?v=__ASSET_VERSION__:1914 === COMPLETED generateChampionCards ===
